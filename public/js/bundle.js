parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"g63L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.displayMap=void 0;var e=exports.displayMap=function(e){if("undefined"!=typeof maplibregl){var t=new maplibregl.Map({container:"map",style:"https://api.maptiler.com/maps/streets-v2/style.json?key=QAbMY8lUX8I5Q7yqOe7J",scrollZoom:!1}),a=new maplibregl.LngLatBounds;t.on("load",function(){e.forEach(function(e){var o=document.createElement("div");o.className="marker",new maplibregl.Marker({element:o,anchor:"bottom"}).setLngLat(e.coordinates).addTo(t),new maplibregl.Popup({offset:30}).setLngLat(e.coordinates).setHTML("<p>Day ".concat(e.day,": ").concat(e.description,"</p>")).addTo(t),a.extend(e.coordinates)}),t.fitBounds(a,{padding:{top:200,bottom:150,left:100,right:100},linear:!0})})}};
},{}],"odIX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showAlert=exports.hideAlert=void 0;var e=exports.showAlert=function(e,r){t();var o='<div class="alert alert--'.concat(e,'">').concat(r,"</div>");document.querySelector("body").insertAdjacentHTML("afterbegin",o),window.setTimeout(t,5e3)},t=exports.hideAlert=function(){var e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)};
},{}],"GL6V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logout=exports.login=void 0;var t=require("./alerts.js");function r(){var t,e,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function a(r,o,i,u){var a=o&&o.prototype instanceof s?o:s,l=Object.create(a.prototype);return n(l,"_invoke",function(r,n,o){var i,u,a,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(r,n){return i=r,u=0,a=t,p.n=n,c}};function v(r,n){for(u=r,a=n,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],v=p.p,d=i[2];r>3?(o=d===n)&&(a=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=r<2&&v<i[1])?(u=0,p.v=n,p.n=i[1]):v<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,p.n=d,u=0))}if(o||r>1)return c;throw f=!0,n}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,d),u=l,a=d;(e=u<2?t:a)||!f;){i||(u?u<3?(u>1&&(p.n=-1),v(u,a)):p.n=a:p.v=a);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,a)))throw TypeError("iterator result is not an object");if(!e.done)return e;a=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=p.n<0)?a:r.call(n,p))!==c)break}catch(e){i=t,u=1,a=e}finally{s=1}}return{value:e,done:f}}}(r,i,u),!0),l}var c={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][i]?e(e([][i]())):(n(e={},i,function(){return this}),e),v=f.prototype=s.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t}return l.prototype=f,n(v,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,u,"GeneratorFunction"),n(v),n(v,u,"Generator"),n(v,i,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:a,m:d}})()}function n(t,r,e,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}(n=function(t,r,e,o){if(r)i?i(t,r,{value:e,enumerable:!o,configurable:!o,writable:!o}):t[r]=e;else{function u(r,e){n(t,r,function(t){return this._invoke(r,e,t)})}u("next",0),u("throw",1),u("return",2)}})(t,r,e,o)}function e(t,r,n,e,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void n(t)}a.done?r(c):Promise.resolve(c).then(e,o)}function o(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var u=t.apply(r,n);function a(t){e(u,o,i,a,c,"next",t)}function c(t){e(u,o,i,a,c,"throw",t)}a(void 0)})}}var i=window.axios,u=exports.login=function(){var n=o(r().m(function n(e,o){var u,a;return r().w(function(r){for(;;)switch(r.n){case 0:return r.p=0,r.n=1,i({method:"POST",url:"/api/v1/users/login",data:{email:e,password:o}});case 1:"success"===r.v.data.status&&((0,t.showAlert)("success","Logged in successfully!"),window.setTimeout(function(){location.assign("/")},1500)),r.n=3;break;case 2:r.p=2,a=r.v,(0,t.showAlert)("error",(null===(u=a.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)||"Error logging in! Try again.");case 3:return r.a(2)}},n,null,[[0,2]])}));return function(t,r){return n.apply(this,arguments)}}(),a=exports.logout=function(){var n=o(r().m(function n(){var e;return r().w(function(r){for(;;)switch(r.n){case 0:return r.p=0,r.n=1,i({method:"GET",url:"/api/v1/users/logout"});case 1:"success"===r.v.data.status&&location.reload(!0),r.n=3;break;case 2:r.p=2,e=r.v,console.log(e.response),(0,t.showAlert)("error","Error logging out! Try again.");case 3:return r.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}();
},{"./alerts.js":"odIX"}],"FxPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateSettings=void 0;var t=require("./alerts.js");function r(){var t,n,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(r,o,u,a){var i=o&&o.prototype instanceof s?o:s,f=Object.create(i.prototype);return e(f,"_invoke",function(r,e,o){var u,a,i,s=0,f=o||[],p=!1,l={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(r,e){return u=r,a=0,i=t,l.n=e,c}};function v(r,e){for(a=r,i=e,n=0;!p&&s&&!o&&n<f.length;n++){var o,u=f[n],v=l.p,d=u[2];r>3?(o=d===e)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=v&&((o=r<2&&v<u[1])?(a=0,l.v=e,l.n=u[1]):v<d&&(o=r<3||u[0]>e||e>d)&&(u[4]=r,u[5]=e,l.n=d,a=0))}if(o||r>1)return c;throw p=!0,e}return function(o,f,d){if(s>1)throw TypeError("Generator is already running");for(p&&1===f&&v(f,d),a=f,i=d;(n=a<2?t:i)||!p;){u||(a?a<3?(a>1&&(l.n=-1),v(a,i)):l.n=i:l.v=i);try{if(s=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((n=(p=l.n<0)?i:r.call(e,l))!==c)break}catch(n){u=t,a=1,i=n}finally{s=1}}return{value:n,done:p}}}(r,u,a),!0),f}var c={};function s(){}function f(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(e(n={},u,function(){return this}),n),v=p.prototype=s.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,e(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=p,e(v,"constructor",p),e(p,"constructor",f),f.displayName="GeneratorFunction",e(p,a,"GeneratorFunction"),e(v),e(v,a,"Generator"),e(v,u,function(){return this}),e(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:d}})()}function e(t,r,n,o){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}(e=function(t,r,n,o){if(r)u?u(t,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[r]=n;else{function a(r,n){e(t,r,function(t){return this._invoke(r,n,t)})}a("next",0),a("throw",1),a("return",2)}})(t,r,n,o)}function n(t,r,e,n,o,u,a){try{var i=t[u](a),c=i.value}catch(t){return void e(t)}i.done?r(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,u){var a=t.apply(r,e);function i(t){n(a,o,u,i,c,"next",t)}function c(t){n(a,o,u,i,c,"throw",t)}i(void 0)})}}var u=window.axios,a=exports.updateSettings=function(){var e=o(r().m(function e(n,o){var a,i;return r().w(function(r){for(;;)switch(r.n){case 0:return r.p=0,a="password"===o?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",r.n=1,u({method:"PATCH",url:a,data:n});case 1:"success"===r.v.data.status&&(0,t.showAlert)("success","".concat(o.toUpperCase()," updated successfully !")),r.n=3;break;case 2:r.p=2,i=r.v,(0,t.showAlert)("error",i.response.data.message);case 3:return r.a(2)}},e,null,[[0,2]])}));return function(t,r){return e.apply(this,arguments)}}();
},{"./alerts.js":"odIX"}],"Uj2q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bookTour=void 0;var t=require("./alerts.js");function r(){var t,n,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function u(r,o,i,c){var u=o&&o.prototype instanceof s?o:s,f=Object.create(u.prototype);return e(f,"_invoke",function(r,e,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(r,e){return i=r,c=0,u=t,p.n=e,a}};function v(r,e){for(c=r,u=e,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,d=i[2];r>3?(o=d===e)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=r<2&&v<i[1])?(c=0,p.v=e,p.n=i[1]):v<d&&(o=r<3||i[0]>e||e>d)&&(i[4]=r,i[5]=e,p.n=d,c=0))}if(o||r>1)return a;throw l=!0,e}return function(o,f,d){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,d),c=f,u=d;(n=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),v(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),n=i[o]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,c<2&&(c=0)}else 1===c&&(n=i.return)&&n.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((n=(l=p.n<0)?u:r.call(e,p))!==a)break}catch(n){i=t,c=1,u=n}finally{s=1}}return{value:n,done:l}}}(r,i,c),!0),f}var a={};function s(){}function f(){}function l(){}n=Object.getPrototypeOf;var p=[][i]?n(n([][i]())):(e(n={},i,function(){return this}),n),v=l.prototype=s.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,e(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=l,e(v,"constructor",l),e(l,"constructor",f),f.displayName="GeneratorFunction",e(l,c,"GeneratorFunction"),e(v),e(v,c,"Generator"),e(v,i,function(){return this}),e(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:u,m:d}})()}function e(t,r,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}(e=function(t,r,n,o){if(r)i?i(t,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[r]=n;else{function c(r,n){e(t,r,function(t){return this._invoke(r,n,t)})}c("next",0),c("throw",1),c("return",2)}})(t,r,n,o)}function n(t,r,e,n,o,i,c){try{var u=t[i](c),a=u.value}catch(t){return void e(t)}u.done?r(a):Promise.resolve(a).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,i){var c=t.apply(r,e);function u(t){n(c,o,i,u,a,"next",t)}function a(t){n(c,o,i,u,a,"throw",t)}u(void 0)})}}var i=window.axios,c=Stripe("pk_test_51ScMSvEXI2LWzIwahY0cL6I9cAvlVn2CuE6GdUhBWw5X3O7Whhaz73SYtu3bT8d68HS9NVRZt5QzUhrNixSgOrX300EyazkEQm"),u=exports.bookTour=function(){var e=o(r().m(function e(n){var o,u,a,s;return r().w(function(r){for(;;)switch(r.n){case 0:return r.p=0,r.n=1,i({method:"GET",url:"/api/v1/bookings/checkout-session/".concat(n),withCredentials:!0});case 1:if(o=r.v,"success"!==(u=o.data).status){r.n=3;break}return r.n=2,c.redirectToCheckout({sessionId:u.session.id});case 2:r.n=4;break;case 3:console.error(u.message);case 4:r.n=6;break;case 5:r.p=5,s=r.v,console.error(s),(0,t.showAlert)("error",(null===(a=s.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||"Something went wrong!");case 6:return r.a(2)}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}();
},{"./alerts.js":"odIX"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./mapbox.js"),t=require("./loginn.js"),n=require("./updateSettings.js"),r=require("./alerts.js"),o=require("./stripe.js");function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,a){var i=r&&r.prototype instanceof s?r:s,d=Object.create(i.prototype);return u(d,"_invoke",function(n,r,o){var a,u,i,s=0,d=o||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,u=0,i=e,f.n=n,c}};function p(n,r){for(u=n,i=r,t=0;!l&&s&&!o&&t<d.length;t++){var o,a=d[t],p=f.p,m=a[2];n>3?(o=m===r)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(u=0,f.v=r,f.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,u=0))}if(o||n>1)return c;throw l=!0,r}return function(o,d,m){if(s>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),u=d,i=m;(t=u<2?e:i)||!l;){a||(u?u<3?(u>1&&(f.n=-1),p(u,i)):f.n=i:f.v=i);try{if(s=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(l=f.n<0)?i:n.call(r,f))!==c)break}catch(t){a=e,u=1,i=t}finally{s=1}}return{value:t,done:l}}}(n,o,a),!0),d}var c={};function s(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,u(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,u(p,"constructor",l),u(l,"constructor",d),d.displayName="GeneratorFunction",u(l,o,"GeneratorFunction"),u(p),u(p,o,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:m}})()}function u(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(u=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function a(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function i(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)})}}var s=document.getElementById("map"),d=document.querySelector(".form--login"),l=document.querySelector(".nav__el--logout"),f=document.querySelector(".form-user-data"),p=document.querySelector(".form-user-password"),m=document.getElementById("bookTourBtn");if(s){var v=JSON.parse(s.dataset.locations);(0,e.displayMap)(v)}d&&d.addEventListener("submit",function(e){e.preventDefault();var n=document.getElementById("email").value,r=document.getElementById("password").value;(0,t.login)(n,r)}),l&&l.addEventListener("click",t.logout),f&&f.addEventListener("submit",function(e){e.preventDefault();var t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),(0,n.updateSettings)(t,"data")}),p&&p.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("password-current").value,r=document.getElementById("password").value,o=document.getElementById("password-confirm").value;(0,n.updateSettings)({passwordCurrent:t,password:r,passwordConfirm:o},"password")}),m&&m.addEventListener("click",function(){var e=c(a().m(function e(t){var n;return a().w(function(e){for(;;)switch(e.n){case 0:t.target.textContent="Processing...",n=t.target.dataset.tourId,(0,o.bookTour)(n);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());
},{"./mapbox.js":"g63L","./loginn.js":"GL6V","./updateSettings.js":"FxPS","./alerts.js":"odIX","./stripe.js":"Uj2q"}]},{},["Focm"], null)
//# sourceMappingURL=/bundle.js.map